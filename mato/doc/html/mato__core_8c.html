<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mato-framework: mato_core.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mato-framework
   </div>
   <div id="projectbrief">Communication framework for modular control architecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mato_core.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mato_8h_source.html">mato.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mato__net_8h_source.html">mato_net.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mato__core_8h_source.html">mato_core.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mato_core.c:</div>
<div class="dyncontent">
<div class="center"><img src="mato__core_8c__incl.png" border="0" usemap="#mato__core_8c" alt=""/></div>
<map name="mato__core_8c" id="mato__core_8c">
<area shape="rect" title=" " alt="" coords="280,5,383,32"/>
<area shape="rect" href="mato_8h.html" title=" " alt="" coords="5,229,73,256"/>
<area shape="rect" href="mato__net_8h.html" title=" " alt="" coords="283,80,379,107"/>
<area shape="rect" href="mato__core_8h.html" title=" " alt="" coords="520,155,623,181"/>
<area shape="rect" title=" " alt="" coords="46,304,105,331"/>
<area shape="rect" title=" " alt="" coords="33,155,136,181"/>
<area shape="rect" title=" " alt="" coords="161,155,259,181"/>
<area shape="rect" title=" " alt="" coords="283,155,379,181"/>
<area shape="rect" title=" " alt="" coords="404,155,496,181"/>
<area shape="rect" title=" " alt="" coords="149,229,215,256"/>
<area shape="rect" title=" " alt="" coords="240,229,311,256"/>
<area shape="rect" title=" " alt="" coords="335,229,410,256"/>
<area shape="rect" title=" " alt="" coords="435,229,505,256"/>
<area shape="rect" title=" " alt="" coords="529,229,613,256"/>
<area shape="rect" title=" " alt="" coords="637,229,700,256"/>
<area shape="rect" title=" " alt="" coords="724,229,792,256"/>
<area shape="rect" title=" " alt="" coords="816,229,903,256"/>
<area shape="rect" title=" " alt="" coords="927,229,1023,256"/>
<area shape="rect" title=" " alt="" coords="1047,229,1133,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0d4eb232de3e0d9c18edc91eb1316421"><td class="memItemLeft" align="right" valign="top"><a id="a0d4eb232de3e0d9c18edc91eb1316421"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a0d4eb232de3e0d9c18edc91eb1316421">core_mato_shutdown</a> ()</td></tr>
<tr class="memdesc:a0d4eb232de3e0d9c18edc91eb1316421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release resources used by the core. <br /></td></tr>
<tr class="separator:a0d4eb232de3e0d9c18edc91eb1316421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="memItemLeft" align="right" valign="top"><a id="a438cf6032d01d451d50cf8cd7b14d8f0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a438cf6032d01d451d50cf8cd7b14d8f0">lock_framework</a> ()</td></tr>
<tr class="memdesc:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter mutually-exclusive area accessing internal framework data structures. <br /></td></tr>
<tr class="separator:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c60cf29218c107f4115b73270a5114"><td class="memItemLeft" align="right" valign="top"><a id="a39c60cf29218c107f4115b73270a5114"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a39c60cf29218c107f4115b73270a5114">unlock_framework</a> ()</td></tr>
<tr class="memdesc:a39c60cf29218c107f4115b73270a5114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave mutually-exclusive area with a protected acces to internal framework data structures. <br /></td></tr>
<tr class="separator:a39c60cf29218c107f4115b73270a5114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a6b505bcf5e3cca4665cba3bbab3cd"><td class="memItemLeft" align="right" valign="top"><a id="a94a6b505bcf5e3cca4665cba3bbab3cd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a94a6b505bcf5e3cca4665cba3bbab3cd">mato_inc_system_thread_count</a> ()</td></tr>
<tr class="memdesc:a94a6b505bcf5e3cca4665cba3bbab3cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the number of internal framework threads running. This should be called by each framework thread that has been started. <br /></td></tr>
<tr class="separator:a94a6b505bcf5e3cca4665cba3bbab3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87731b4b9da695d14f237dc6825c9186"><td class="memItemLeft" align="right" valign="top"><a id="a87731b4b9da695d14f237dc6825c9186"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a87731b4b9da695d14f237dc6825c9186">mato_dec_system_thread_count</a> ()</td></tr>
<tr class="memdesc:a87731b4b9da695d14f237dc6825c9186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement the number of internal framework threads running. It should be called by each framework thread that terminates. <br /></td></tr>
<tr class="separator:a87731b4b9da695d14f237dc6825c9186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dfe1d249e65f9c9277279f03c54c90f"><td class="memItemLeft" align="right" valign="top"><a id="a9dfe1d249e65f9c9277279f03c54c90f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a9dfe1d249e65f9c9277279f03c54c90f">mato_system_threads_running</a> ()</td></tr>
<tr class="memdesc:a9dfe1d249e65f9c9277279f03c54c90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of mato system threads that are currently running (not terminated yet). <br /></td></tr>
<tr class="separator:a9dfe1d249e65f9c9277279f03c54c90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a948891305b2d86ead8d8b9e98ee992ea"><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a948891305b2d86ead8d8b9e98ee992ea">decrement_references</a> (GList *data_buffers, <a class="el" href="structchannel__data.html">channel_data</a> *to_be_decremented)</td></tr>
<tr class="memdesc:a948891305b2d86ead8d8b9e98ee992ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrements the number of references to a particular buffer and deallocates the buffer itself as well as the structure describing the buffer.  <a href="mato__core_8c.html#a948891305b2d86ead8d8b9e98ee992ea">More...</a><br /></td></tr>
<tr class="separator:a948891305b2d86ead8d8b9e98ee992ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7800709ec7535d9abc6454e510212d6c"><td class="memItemLeft" align="right" valign="top"><a id="a7800709ec7535d9abc6454e510212d6c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_names_types</b> (int node_id)</td></tr>
<tr class="separator:a7800709ec7535d9abc6454e510212d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bee50d9bc9c78f39d7f7cf6354a540d"><td class="memItemLeft" align="right" valign="top"><a id="a4bee50d9bc9c78f39d7f7cf6354a540d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_node_from_subscriptions</b> (int node_id)</td></tr>
<tr class="separator:a4bee50d9bc9c78f39d7f7cf6354a540d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc3809f243d54fc76dd0539fbd847f0"><td class="memItemLeft" align="right" valign="top"><a id="afdc3809f243d54fc76dd0539fbd847f0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_node_buffers</b> (int node_id)</td></tr>
<tr class="separator:afdc3809f243d54fc76dd0539fbd847f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e477c79e3ad08d61c3d4473baea950"><td class="memItemLeft" align="right" valign="top"><a id="af4e477c79e3ad08d61c3d4473baea950"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#af4e477c79e3ad08d61c3d4473baea950">store_new_remote_module</a> (int node_id, int module_id, char *module_name, char *module_type, int number_of_channels)</td></tr>
<tr class="memdesc:af4e477c79e3ad08d61c3d4473baea950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update internal data structures as necessary when a new module announcement arrives from another node. <br /></td></tr>
<tr class="separator:af4e477c79e3ad08d61c3d4473baea950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97dbf0eeadf4345327dcf392d02c30c"><td class="memItemLeft" align="right" valign="top"><a id="ae97dbf0eeadf4345327dcf392d02c30c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#ae97dbf0eeadf4345327dcf392d02c30c">get_free_module_id</a> ()</td></tr>
<tr class="memdesc:ae97dbf0eeadf4345327dcf392d02c30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next available module_id. <br /></td></tr>
<tr class="separator:ae97dbf0eeadf4345327dcf392d02c30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96455f34de227205787b911dbe51847"><td class="memItemLeft" align="right" valign="top"><a id="aa96455f34de227205787b911dbe51847"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#aa96455f34de227205787b911dbe51847">get_free_subscription_id</a> ()</td></tr>
<tr class="memdesc:aa96455f34de227205787b911dbe51847"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next available subscription_id. <br /></td></tr>
<tr class="separator:aa96455f34de227205787b911dbe51847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979625f0ce491a3abd1eb68ca93d803b"><td class="memItemLeft" align="right" valign="top"><a id="a979625f0ce491a3abd1eb68ca93d803b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_subscription</b> (int subscribed_node_id, int subscribed_module_id, int channel, int subscription_id)</td></tr>
<tr class="separator:a979625f0ce491a3abd1eb68ca93d803b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041903e9b52f56435f88cff5f41aff3e"><td class="memItemLeft" align="right" valign="top"><a id="a041903e9b52f56435f88cff5f41aff3e"></a>
<a class="el" href="structmodule__info.html">module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a041903e9b52f56435f88cff5f41aff3e">new_module_info</a> (int node_id, int module_id, char *module_name, char *module_type)</td></tr>
<tr class="memdesc:a041903e9b52f56435f88cff5f41aff3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constructor for the <a class="el" href="structmodule__info.html" title="List of modules descriptions consists of structures describing the basic information about a module.">module_info</a> structure. <br /></td></tr>
<tr class="separator:a041903e9b52f56435f88cff5f41aff3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1150c35e05b0d14d3e5e6f064558d83"><td class="memItemLeft" align="right" valign="top"><a id="af1150c35e05b0d14d3e5e6f064558d83"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#af1150c35e05b0d14d3e5e6f064558d83">core_mato_init</a> ()</td></tr>
<tr class="memdesc:af1150c35e05b0d14d3e5e6f064558d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize data structures maintained by the core. <br /></td></tr>
<tr class="separator:af1150c35e05b0d14d3e5e6f064558d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2da0b2b93801c2136969b06d8045ac69"><td class="memItemLeft" align="right" valign="top"><a id="a2da0b2b93801c2136969b06d8045ac69"></a>
<a class="el" href="structchannel__data.html">channel_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a2da0b2b93801c2136969b06d8045ac69">new_channel_data</a> (int node_id, int module_id, int channel_id, int length, void *data)</td></tr>
<tr class="memdesc:a2da0b2b93801c2136969b06d8045ac69"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constructor for the <a class="el" href="structchannel__data.html" title="The structure holds one message that was posted by a module to one of its output channels.">channel_data</a> structure. <br /></td></tr>
<tr class="separator:a2da0b2b93801c2136969b06d8045ac69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee143235f543184363dea746b824056"><td class="memItemLeft" align="right" valign="top"><a id="a8ee143235f543184363dea746b824056"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a8ee143235f543184363dea746b824056">subscribe_channel_from_remote_node</a> (int remote_node_id, int subscribed_module_id, int channel)</td></tr>
<tr class="memdesc:a8ee143235f543184363dea746b824056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update internal subscriptions: a remote node subscribing to our module's channel. <br /></td></tr>
<tr class="separator:a8ee143235f543184363dea746b824056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fa60389c0d5ac17eb194e386d89ad2"><td class="memItemLeft" align="right" valign="top"><a id="a53fa60389c0d5ac17eb194e386d89ad2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a53fa60389c0d5ac17eb194e386d89ad2">unsubscribe_channel_from_remote_node</a> (int remote_node_id, int subscribed_module_id, int channel)</td></tr>
<tr class="memdesc:a53fa60389c0d5ac17eb194e386d89ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update internal subscriptions: a remote node unsubscribing to our module's channel. <br /></td></tr>
<tr class="separator:a53fa60389c0d5ac17eb194e386d89ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85eaf4d8c2e0b799ffbb4c089452a0b5"><td class="memItemLeft" align="right" valign="top"><a id="a85eaf4d8c2e0b799ffbb4c089452a0b5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a85eaf4d8c2e0b799ffbb4c089452a0b5">get_data_from_remote</a> (int remote_node_id, int module_id, int channel, int get_data_id)</td></tr>
<tr class="memdesc:a85eaf4d8c2e0b799ffbb4c089452a0b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remote module is requesting data from our channel, retrieve them and send back. <br /></td></tr>
<tr class="separator:a85eaf4d8c2e0b799ffbb4c089452a0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0f80851fe27966d69a2a0dfbafdb7160"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a0f80851fe27966d69a2a0dfbafdb7160">program_runs</a></td></tr>
<tr class="memdesc:a0f80851fe27966d69a2a0dfbafdb7160"><td class="mdescLeft">&#160;</td><td class="mdescRight">This variable is set to non-zero when the program is about to terminate.  <a href="mato__core_8c.html#a0f80851fe27966d69a2a0dfbafdb7160">More...</a><br /></td></tr>
<tr class="separator:a0f80851fe27966d69a2a0dfbafdb7160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23868df494ffd83e64765b50b2f59de0"><td class="memItemLeft" align="right" valign="top"><a id="a23868df494ffd83e64765b50b2f59de0"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a23868df494ffd83e64765b50b2f59de0">threads_started</a></td></tr>
<tr class="memdesc:a23868df494ffd83e64765b50b2f59de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the number of threads that are running. Use the functions <a class="el" href="mato_8c.html#a6b31044a7afec17426ec4d4e3354aa9f" title="Each module instance (or other part of the program) that creates a new thread should call this funcit...">mato_inc_thread_count()</a> and <a class="el" href="mato_8c.html#a480acc181ff3a7d7c925d64e3d4a7442" title="Each thread that terminates should call this function just before it quits.">mato_dec_thread_count()</a>. <br /></td></tr>
<tr class="separator:a23868df494ffd83e64765b50b2f59de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc307467ee069828e40a521f193e8b80"><td class="memItemLeft" align="right" valign="top"><a id="acc307467ee069828e40a521f193e8b80"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#acc307467ee069828e40a521f193e8b80">system_threads_started</a></td></tr>
<tr class="memdesc:acc307467ee069828e40a521f193e8b80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the number of internal framework threads that are running. Use the functions <a class="el" href="mato__core_8h.html#a94a6b505bcf5e3cca4665cba3bbab3cd" title="Increment the number of internal framework threads running. This should be called by each framework t...">mato_inc_system_thread_count()</a> and <a class="el" href="mato__core_8h.html#a87731b4b9da695d14f237dc6825c9186" title="Decrement the number of internal framework threads running. It should be called by each framework thr...">mato_dec_system_thread_count()</a>. <br /></td></tr>
<tr class="separator:acc307467ee069828e40a521f193e8b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a7ccdd7e11e9c4bbf1887270e9d74779a">module_names</a></td></tr>
<tr class="memdesc:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains list of names of all module instances.  <a href="mato__core_8c.html#a7ccdd7e11e9c4bbf1887270e9d74779a">More...</a><br /></td></tr>
<tr class="separator:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f565b6876bed976cee1f43eaa6d6787"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a2f565b6876bed976cee1f43eaa6d6787">module_types</a></td></tr>
<tr class="memdesc:a2f565b6876bed976cee1f43eaa6d6787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains list of types of all module instances.  <a href="mato__core_8c.html#a2f565b6876bed976cee1f43eaa6d6787">More...</a><br /></td></tr>
<tr class="separator:a2f565b6876bed976cee1f43eaa6d6787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0d7e8d878428833528a1123d6558c5"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a0e0d7e8d878428833528a1123d6558c5">instance_data</a></td></tr>
<tr class="memdesc:a0e0d7e8d878428833528a1123d6558c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains pointers to instance_data of all module instances as returned by their create_instance_callback.  <a href="mato__core_8c.html#a0e0d7e8d878428833528a1123d6558c5">More...</a><br /></td></tr>
<tr class="separator:a0e0d7e8d878428833528a1123d6558c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc125cf88b5a24be8ced43b9f710a19"><td class="memItemLeft" align="right" valign="top">GHashTable *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a8cc125cf88b5a24be8ced43b9f710a19">module_specifications</a></td></tr>
<tr class="memdesc:a8cc125cf88b5a24be8ced43b9f710a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structures for all type names.  <a href="mato__core_8c.html#a8cc125cf88b5a24be8ced43b9f710a19">More...</a><br /></td></tr>
<tr class="separator:a8cc125cf88b5a24be8ced43b9f710a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2822a291e85d87882c86a179b50c99f6"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a2822a291e85d87882c86a179b50c99f6">buffers</a></td></tr>
<tr class="memdesc:a2822a291e85d87882c86a179b50c99f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data of all messages that are maintained by the framework at any point of time are kept in this GArray.  <a href="mato__core_8c.html#a2822a291e85d87882c86a179b50c99f6">More...</a><br /></td></tr>
<tr class="separator:a2822a291e85d87882c86a179b50c99f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a6dc7b239323f6dbb221f209b6f518"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a08a6dc7b239323f6dbb221f209b6f518">subscriptions</a></td></tr>
<tr class="memdesc:a08a6dc7b239323f6dbb221f209b6f518"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all descriptions of subscriptions, instances of subscription structures.  <a href="mato__core_8c.html#a08a6dc7b239323f6dbb221f209b6f518">More...</a><br /></td></tr>
<tr class="separator:a08a6dc7b239323f6dbb221f209b6f518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225d8d1a4c4e855493b258620e5e2be4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato__core_8c.html#a225d8d1a4c4e855493b258620e5e2be4">post_data_pipe</a> [2]</td></tr>
<tr class="memdesc:a225d8d1a4c4e855493b258620e5e2be4"><td class="mdescLeft">&#160;</td><td class="mdescRight">New messages that are posted by the modules are allocated in dynamic memory.  <a href="mato__core_8c.html#a225d8d1a4c4e855493b258620e5e2be4">More...</a><br /></td></tr>
<tr class="separator:a225d8d1a4c4e855493b258620e5e2be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the Mato control framework - internal data structures and algorithms. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a948891305b2d86ead8d8b9e98ee992ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a948891305b2d86ead8d8b9e98ee992ea">&#9670;&nbsp;</a></span>decrement_references()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* decrement_references </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>data_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__data.html">channel_data</a> *&#160;</td>
          <td class="paramname"><em>to_be_decremented</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrements the number of references to a particular buffer and deallocates the buffer itself as well as the structure describing the buffer. </p>
<p>It also removes it from the list of the framework-maintained messages. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2822a291e85d87882c86a179b50c99f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2822a291e85d87882c86a179b50c99f6">&#9670;&nbsp;</a></span>buffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* buffers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data of all messages that are maintained by the framework at any point of time are kept in this GArray. </p>
<p>It is indexed by module_id and contains GArrays indexed by channel number of the particular module instance. Finally, the elements of the nested GArray are GLists - the list of all messages of the particular module in its particular channel that are still needed by the framework or any other module and thus have not been deallocated. Each time a module posts a new message to its channel, it is added to that list. The message is removed from the list when it has have been forwarded to all the subscribers, no subscriber or another module has borrowed a pointer to it and a new message from the module on the same channel has already arrived. </p>

</div>
</div>
<a id="a0e0d7e8d878428833528a1123d6558c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0d7e8d878428833528a1123d6558c5">&#9670;&nbsp;</a></span>instance_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* instance_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains pointers to instance_data of all module instances as returned by their create_instance_callback. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a7ccdd7e11e9c4bbf1887270e9d74779a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ccdd7e11e9c4bbf1887270e9d74779a">&#9670;&nbsp;</a></span>module_names</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* module_names</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains list of names of all module instances. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a8cc125cf88b5a24be8ced43b9f710a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cc125cf88b5a24be8ced43b9f710a19">&#9670;&nbsp;</a></span>module_specifications</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GHashTable* module_specifications</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structures for all type names. </p>
<p>The keys in this hashtable are the module types. The value is a pointer to <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structure as provided by the argument to <a class="el" href="mato_8c.html#a43f0570e3ab59d7a021e93113437dcaf" title="Register a new module type.">mato_register_new_type_of_module()</a> function that is typically called from the init function of a module type. </p>

</div>
</div>
<a id="a2f565b6876bed976cee1f43eaa6d6787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f565b6876bed976cee1f43eaa6d6787">&#9670;&nbsp;</a></span>module_types</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* module_types</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains list of types of all module instances. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a225d8d1a4c4e855493b258620e5e2be4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225d8d1a4c4e855493b258620e5e2be4">&#9670;&nbsp;</a></span>post_data_pipe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int post_data_pipe[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>New messages that are posted by the modules are allocated in dynamic memory. </p>
<p>Pointers to that memory enter this pipe and are picked up by a message redistribution loop that takes care of them in a serial manner. Handling of each message is supposed to be done very quickly - assuming the subscriber callbacks return quickly. In the future release, we expect each subscriber callback to be called in a separate thread taken from a thread pool. </p>

</div>
</div>
<a id="a0f80851fe27966d69a2a0dfbafdb7160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f80851fe27966d69a2a0dfbafdb7160">&#9670;&nbsp;</a></span>program_runs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int program_runs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This variable is set to non-zero when the program is about to terminate. </p>
<p>All threads should terminate at the earliest possbility </p>

</div>
</div>
<a id="a08a6dc7b239323f6dbb221f209b6f518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08a6dc7b239323f6dbb221f209b6f518">&#9670;&nbsp;</a></span>subscriptions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* subscriptions</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains all descriptions of subscriptions, instances of subscription structures. </p>
<p>The GArray is indexed by the module_id and contains GArrays indexed by channel number Finally, the nested GArray elements are again GArrays containing all subscriptions to that particular channel of that particular module. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
