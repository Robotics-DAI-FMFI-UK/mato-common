<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mato-framework: mato.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mato-framework
   </div>
   <div id="projectbrief">Communication framework for modular control architecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mato.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;glib.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mato_8h_source.html">mato.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mato.c:</div>
<div class="dyncontent">
<div class="center"><img src="mato_8c__incl.png" border="0" usemap="#mato_8c" alt=""/></div>
<map name="mato_8c" id="mato_8c">
<area shape="rect" title=" " alt="" coords="304,5,371,32"/>
<area shape="rect" title=" " alt="" coords="5,80,72,107"/>
<area shape="rect" title=" " alt="" coords="97,80,167,107"/>
<area shape="rect" title=" " alt="" coords="417,155,476,181"/>
<area shape="rect" title=" " alt="" coords="243,80,327,107"/>
<area shape="rect" title=" " alt="" coords="352,80,427,107"/>
<area shape="rect" title=" " alt="" coords="451,80,519,107"/>
<area shape="rect" title=" " alt="" coords="543,80,630,107"/>
<area shape="rect" href="mato_8h.html" title=" " alt="" coords="654,80,722,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsubscription.html">subscription</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The structure describes a single individual subscription to some channel of some module.  <a href="structsubscription.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structchannel__data.html">channel_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The structure holds one message that was posted by a module to one of its output channels.  <a href="structchannel__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a81ccbf2e8be46ef287e2df22d8fe831f"><td class="memItemLeft" align="right" valign="top"><a id="a81ccbf2e8be46ef287e2df22d8fe831f"></a>
<a class="el" href="structchannel__data.html">channel_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a81ccbf2e8be46ef287e2df22d8fe831f">new_channel_data</a> (int module_id, int channel_id, int length, void *data)</td></tr>
<tr class="memdesc:a81ccbf2e8be46ef287e2df22d8fe831f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constructor for the <a class="el" href="structchannel__data.html" title="The structure holds one message that was posted by a module to one of its output channels.">channel_data</a> structure. <br /></td></tr>
<tr class="separator:a81ccbf2e8be46ef287e2df22d8fe831f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="memItemLeft" align="right" valign="top"><a id="a438cf6032d01d451d50cf8cd7b14d8f0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a438cf6032d01d451d50cf8cd7b14d8f0">lock_framework</a> ()</td></tr>
<tr class="memdesc:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter mutually-exclusive area accessing internal framework data structures. <br /></td></tr>
<tr class="separator:a438cf6032d01d451d50cf8cd7b14d8f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c60cf29218c107f4115b73270a5114"><td class="memItemLeft" align="right" valign="top"><a id="a39c60cf29218c107f4115b73270a5114"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a39c60cf29218c107f4115b73270a5114">unlock_framework</a> ()</td></tr>
<tr class="memdesc:a39c60cf29218c107f4115b73270a5114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave mutually-exclusive area with a protected acces to internal framework data structures. <br /></td></tr>
<tr class="separator:a39c60cf29218c107f4115b73270a5114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a948891305b2d86ead8d8b9e98ee992ea"><td class="memItemLeft" align="right" valign="top">GList *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a948891305b2d86ead8d8b9e98ee992ea">decrement_references</a> (GList *data_buffers, <a class="el" href="structchannel__data.html">channel_data</a> *to_be_decremented)</td></tr>
<tr class="memdesc:a948891305b2d86ead8d8b9e98ee992ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrements the number of references to a particular buffer and deallocates the buffer itself as well as the structure describing the buffer.  <a href="mato_8c.html#a948891305b2d86ead8d8b9e98ee992ea">More...</a><br /></td></tr>
<tr class="separator:a948891305b2d86ead8d8b9e98ee992ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9608b6c522f70f11ad48fe9cde8d97a6"><td class="memItemLeft" align="right" valign="top"><a id="a9608b6c522f70f11ad48fe9cde8d97a6"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a9608b6c522f70f11ad48fe9cde8d97a6">mato_thread</a> (void *arg)</td></tr>
<tr class="memdesc:a9608b6c522f70f11ad48fe9cde8d97a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop of the framework thread that takes care of redistributing all the messages posted by the modules. <br /></td></tr>
<tr class="separator:a9608b6c522f70f11ad48fe9cde8d97a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96f8e9e3c32c9abdab14dabd590fae87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a96f8e9e3c32c9abdab14dabd590fae87">mato_init</a> ()</td></tr>
<tr class="memdesc:a96f8e9e3c32c9abdab14dabd590fae87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the framework. It must be the first function of the framework to be called. It should be called only once.  <a href="mato_8c.html#a96f8e9e3c32c9abdab14dabd590fae87">More...</a><br /></td></tr>
<tr class="separator:a96f8e9e3c32c9abdab14dabd590fae87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f0570e3ab59d7a021e93113437dcaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a43f0570e3ab59d7a021e93113437dcaf">mato_register_new_type_of_module</a> (char *type, <a class="el" href="structmodule__specification.html">module_specification</a> *specification)</td></tr>
<tr class="memdesc:a43f0570e3ab59d7a021e93113437dcaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a new module type.  <a href="mato_8c.html#a43f0570e3ab59d7a021e93113437dcaf">More...</a><br /></td></tr>
<tr class="separator:a43f0570e3ab59d7a021e93113437dcaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97dbf0eeadf4345327dcf392d02c30c"><td class="memItemLeft" align="right" valign="top"><a id="ae97dbf0eeadf4345327dcf392d02c30c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#ae97dbf0eeadf4345327dcf392d02c30c">get_free_module_id</a> ()</td></tr>
<tr class="memdesc:ae97dbf0eeadf4345327dcf392d02c30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next available module_id. <br /></td></tr>
<tr class="separator:ae97dbf0eeadf4345327dcf392d02c30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96455f34de227205787b911dbe51847"><td class="memItemLeft" align="right" valign="top"><a id="aa96455f34de227205787b911dbe51847"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aa96455f34de227205787b911dbe51847">get_free_subscription_id</a> ()</td></tr>
<tr class="memdesc:aa96455f34de227205787b911dbe51847"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next available subscription_id. <br /></td></tr>
<tr class="separator:aa96455f34de227205787b911dbe51847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411a20bcfa908edbebe617fe5cc54667"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a411a20bcfa908edbebe617fe5cc54667">mato_create_new_module_instance</a> (const char *module_type, const char *module_name)</td></tr>
<tr class="memdesc:a411a20bcfa908edbebe617fe5cc54667"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main program (or other module) can call this function to request creation of a module instance.  <a href="mato_8c.html#a411a20bcfa908edbebe617fe5cc54667">More...</a><br /></td></tr>
<tr class="separator:a411a20bcfa908edbebe617fe5cc54667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a0865fa5114c0a254435a1369531cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a62a0865fa5114c0a254435a1369531cf">mato_start_module</a> (int module_id)</td></tr>
<tr class="memdesc:a62a0865fa5114c0a254435a1369531cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a newly created instance of a particular module.  <a href="mato_8c.html#a62a0865fa5114c0a254435a1369531cf">More...</a><br /></td></tr>
<tr class="separator:a62a0865fa5114c0a254435a1369531cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ef7e731c9c9eaa342352a7e802c183"><td class="memItemLeft" align="right" valign="top"><a id="a02ef7e731c9c9eaa342352a7e802c183"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a02ef7e731c9c9eaa342352a7e802c183">mato_start</a> ()</td></tr>
<tr class="memdesc:a02ef7e731c9c9eaa342352a7e802c183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the framework and all modules. This is typically called after all module instances have been created. <br /></td></tr>
<tr class="separator:a02ef7e731c9c9eaa342352a7e802c183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e94d7d4dc09ad58485227e60df20035"><td class="memItemLeft" align="right" valign="top"><a id="a6e94d7d4dc09ad58485227e60df20035"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a6e94d7d4dc09ad58485227e60df20035">mato_delete_module_instance</a> (int module_id)</td></tr>
<tr class="memdesc:a6e94d7d4dc09ad58485227e60df20035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows to dynamically delete a module instance that was previously created. <br /></td></tr>
<tr class="separator:a6e94d7d4dc09ad58485227e60df20035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa753d75335e7a6ae0e00a6dcdbdb1412"><td class="memItemLeft" align="right" valign="top"><a id="aa753d75335e7a6ae0e00a6dcdbdb1412"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aa753d75335e7a6ae0e00a6dcdbdb1412">mato_get_module_id</a> (const char *module_name)</td></tr>
<tr class="memdesc:aa753d75335e7a6ae0e00a6dcdbdb1412"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate a module name of some existing module instance to its module id. Returns -1, if module name is not known. <br /></td></tr>
<tr class="separator:aa753d75335e7a6ae0e00a6dcdbdb1412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e839c2dcf0c134166ceca799e7987fd"><td class="memItemLeft" align="right" valign="top"><a id="a2e839c2dcf0c134166ceca799e7987fd"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a2e839c2dcf0c134166ceca799e7987fd">mato_get_module_name</a> (int module_id)</td></tr>
<tr class="memdesc:a2e839c2dcf0c134166ceca799e7987fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the name of a module with the specified module_id. <br /></td></tr>
<tr class="separator:a2e839c2dcf0c134166ceca799e7987fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a6ba77196f8504bab5f3da059c5d5b"><td class="memItemLeft" align="right" valign="top"><a id="a28a6ba77196f8504bab5f3da059c5d5b"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a28a6ba77196f8504bab5f3da059c5d5b">mato_get_module_type</a> (int module_id)</td></tr>
<tr class="memdesc:a28a6ba77196f8504bab5f3da059c5d5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the type of a module with the specified module_id. <br /></td></tr>
<tr class="separator:a28a6ba77196f8504bab5f3da059c5d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07c3febed32408feb8a11c4d66c2251"><td class="memItemLeft" align="right" valign="top"><a id="af07c3febed32408feb8a11c4d66c2251"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#af07c3febed32408feb8a11c4d66c2251">mato_subscribe</a> (int subscriber_module_id, int subscribed_module_id, int channel, <a class="el" href="mato_8h.html#a9345221b935d9505595c583b54d31e86">subscriber_callback</a> callback, int subscription_type)</td></tr>
<tr class="memdesc:af07c3febed32408feb8a11c4d66c2251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe on a channel of some module instance. Returns a number that represents this subscription (a subscription_id). <br /></td></tr>
<tr class="separator:af07c3febed32408feb8a11c4d66c2251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f9462b777a24c86af37b64d84142d0"><td class="memItemLeft" align="right" valign="top"><a id="a14f9462b777a24c86af37b64d84142d0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a14f9462b777a24c86af37b64d84142d0">mato_unsubscribe</a> (int module_id, int channel, int subscription_id)</td></tr>
<tr class="memdesc:a14f9462b777a24c86af37b64d84142d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a subscription_id, cancel the ongoing subscription to a channel of some module instance. <br /></td></tr>
<tr class="separator:a14f9462b777a24c86af37b64d84142d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5249cc4fbb65587357c130ab618427"><td class="memItemLeft" align="right" valign="top"><a id="a7c5249cc4fbb65587357c130ab618427"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a7c5249cc4fbb65587357c130ab618427">mato_get_data_buffer</a> (int size)</td></tr>
<tr class="memdesc:a7c5249cc4fbb65587357c130ab618427"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory for a new message to be posted with post_data. <br /></td></tr>
<tr class="separator:a7c5249cc4fbb65587357c130ab618427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd06bdcd1d952465c8c222c663d76fb"><td class="memItemLeft" align="right" valign="top"><a id="aebd06bdcd1d952465c8c222c663d76fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aebd06bdcd1d952465c8c222c663d76fb">mato_post_data</a> (int id_of_posting_module, int channel, int data_length, void *data)</td></tr>
<tr class="memdesc:aebd06bdcd1d952465c8c222c663d76fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">A module instance posts a new message to its own output data channel by calling this function. <br /></td></tr>
<tr class="separator:aebd06bdcd1d952465c8c222c663d76fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76f55dbca38f9a69095cda5f089a80b"><td class="memItemLeft" align="right" valign="top"><a id="ae76f55dbca38f9a69095cda5f089a80b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#ae76f55dbca38f9a69095cda5f089a80b">mato_send_global_message</a> (int module_id_sender, int message_id, int msg_length, void *message_data)</td></tr>
<tr class="memdesc:ae76f55dbca38f9a69095cda5f089a80b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main program or any module instance can post a global message to be posted to all modules immediatelly in the same thread by calling this function. <br /></td></tr>
<tr class="separator:ae76f55dbca38f9a69095cda5f089a80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af356c7284b6f1d6be285de40d9e23b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#af356c7284b6f1d6be285de40d9e23b77">mato_get_data</a> (int id_module, int channel, int *data_length, void **data)</td></tr>
<tr class="memdesc:af356c7284b6f1d6be285de40d9e23b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the most recently posted data of some channel of some module instance.  <a href="mato_8c.html#af356c7284b6f1d6be285de40d9e23b77">More...</a><br /></td></tr>
<tr class="separator:af356c7284b6f1d6be285de40d9e23b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c84af45ac99910057189ede367d72d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#af3c84af45ac99910057189ede367d72d">mato_borrow_data</a> (int id_module, int channel, int *data_length, void **data)</td></tr>
<tr class="memdesc:af3c84af45ac99910057189ede367d72d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the most recently posted data of some channel of some module instance.  <a href="mato_8c.html#af3c84af45ac99910057189ede367d72d">More...</a><br /></td></tr>
<tr class="separator:af3c84af45ac99910057189ede367d72d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedcb803fd4a991e805e6c3813c829a35"><td class="memItemLeft" align="right" valign="top"><a id="aedcb803fd4a991e805e6c3813c829a35"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aedcb803fd4a991e805e6c3813c829a35">mato_release_data</a> (int id_module, int channel, void *data)</td></tr>
<tr class="memdesc:aedcb803fd4a991e805e6c3813c829a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a borrowed pointer that was obtained either by <a class="el" href="mato_8h.html#af3c84af45ac99910057189ede367d72d" title="Retrieve the most recently posted data of some channel of some module instance.">mato_borrow_data()</a> or by a callback in the borrowed_pointer mode. <br /></td></tr>
<tr class="separator:aedcb803fd4a991e805e6c3813c829a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5a67da5a8cdf9665a6bc86f5fd67e4"><td class="memItemLeft" align="right" valign="top"><a id="a4a5a67da5a8cdf9665a6bc86f5fd67e4"></a>
<a class="el" href="structmodule__info.html">module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a4a5a67da5a8cdf9665a6bc86f5fd67e4">new_module_info</a> (int module_id, char *module_name, char *module_type)</td></tr>
<tr class="memdesc:a4a5a67da5a8cdf9665a6bc86f5fd67e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constructor for the <a class="el" href="structmodule__info.html" title="List of modules descriptions consists of structures describing the basic information about a module.">module_info</a> structure. <br /></td></tr>
<tr class="separator:a4a5a67da5a8cdf9665a6bc86f5fd67e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6a3a9b7e7969e9d9324b1d937ff2a5"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a5c6a3a9b7e7969e9d9324b1d937ff2a5">mato_get_list_of_all_modules</a> ()</td></tr>
<tr class="memdesc:a5c6a3a9b7e7969e9d9324b1d937ff2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the list of currently running modules.  <a href="mato_8c.html#a5c6a3a9b7e7969e9d9324b1d937ff2a5">More...</a><br /></td></tr>
<tr class="separator:a5c6a3a9b7e7969e9d9324b1d937ff2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c86d7dbb7acd09f1884c2e80ec698c"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#ac8c86d7dbb7acd09f1884c2e80ec698c">mato_get_list_of_modules</a> (char *type)</td></tr>
<tr class="memdesc:ac8c86d7dbb7acd09f1884c2e80ec698c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the list of currently running modules of the specified type.  <a href="mato_8c.html#ac8c86d7dbb7acd09f1884c2e80ec698c">More...</a><br /></td></tr>
<tr class="separator:ac8c86d7dbb7acd09f1884c2e80ec698c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafc9d85e29a73b9b5423cd661bd54c2"><td class="memItemLeft" align="right" valign="top"><a id="aeafc9d85e29a73b9b5423cd661bd54c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aeafc9d85e29a73b9b5423cd661bd54c2">mato_free_list_of_modules</a> (GArray *a)</td></tr>
<tr class="memdesc:aeafc9d85e29a73b9b5423cd661bd54c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the list of modules returned by either of the two functions <a class="el" href="mato_8h.html#ac8c86d7dbb7acd09f1884c2e80ec698c" title="Retrieve the list of currently running modules of the specified type.">mato_get_list_of_modules()</a> or <a class="el" href="mato_8h.html#ac8c86d7dbb7acd09f1884c2e80ec698c" title="Retrieve the list of currently running modules of the specified type.">mato_get_list_of_modules()</a>. <br /></td></tr>
<tr class="separator:aeafc9d85e29a73b9b5423cd661bd54c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49165685fd95d2e9f70f484e367c6f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#ab49165685fd95d2e9f70f484e367c6f2">mato_data_buffer_usage</a> (int module_id, int channel, int *number_of_allocated_buffers, int *total_sum_of_ref_count)</td></tr>
<tr class="memdesc:ab49165685fd95d2e9f70f484e367c6f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide a diagnostic information on use of the buffers by a particular channel of a particular module.  <a href="mato_8c.html#ab49165685fd95d2e9f70f484e367c6f2">More...</a><br /></td></tr>
<tr class="separator:ab49165685fd95d2e9f70f484e367c6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b31044a7afec17426ec4d4e3354aa9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a6b31044a7afec17426ec4d4e3354aa9f">mato_inc_thread_count</a> ()</td></tr>
<tr class="memdesc:a6b31044a7afec17426ec4d4e3354aa9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the number of threads running. This should be called by each thread that has been started.  <a href="mato_8c.html#a6b31044a7afec17426ec4d4e3354aa9f">More...</a><br /></td></tr>
<tr class="separator:a6b31044a7afec17426ec4d4e3354aa9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480acc181ff3a7d7c925d64e3d4a7442"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a480acc181ff3a7d7c925d64e3d4a7442">mato_dec_thread_count</a> ()</td></tr>
<tr class="memdesc:a480acc181ff3a7d7c925d64e3d4a7442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement the number of threads running. It should be called by each thread that terminates.  <a href="mato_8c.html#a480acc181ff3a7d7c925d64e3d4a7442">More...</a><br /></td></tr>
<tr class="separator:a480acc181ff3a7d7c925d64e3d4a7442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314629d6f743c699b26a534175986865"><td class="memItemLeft" align="right" valign="top"><a id="a314629d6f743c699b26a534175986865"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a314629d6f743c699b26a534175986865">mato_threads_running</a> ()</td></tr>
<tr class="memdesc:a314629d6f743c699b26a534175986865"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of threads currently running in the system. <br /></td></tr>
<tr class="separator:a314629d6f743c699b26a534175986865"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0f80851fe27966d69a2a0dfbafdb7160"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a0f80851fe27966d69a2a0dfbafdb7160">program_runs</a></td></tr>
<tr class="memdesc:a0f80851fe27966d69a2a0dfbafdb7160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to one when the framework is initialized and cleared when any part of the program wants to terminate the whole program.  <a href="mato_8c.html#a0f80851fe27966d69a2a0dfbafdb7160">More...</a><br /></td></tr>
<tr class="separator:a0f80851fe27966d69a2a0dfbafdb7160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23868df494ffd83e64765b50b2f59de0"><td class="memItemLeft" align="right" valign="top"><a id="a23868df494ffd83e64765b50b2f59de0"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a23868df494ffd83e64765b50b2f59de0">threads_started</a></td></tr>
<tr class="memdesc:a23868df494ffd83e64765b50b2f59de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the number of threads that are running. Use the functions <a class="el" href="mato_8c.html#a6b31044a7afec17426ec4d4e3354aa9f" title="Increment the number of threads running. This should be called by each thread that has been started.">mato_inc_thread_count()</a> and <a class="el" href="mato_8c.html#a480acc181ff3a7d7c925d64e3d4a7442" title="Decrement the number of threads running. It should be called by each thread that terminates.">mato_dec_thread_count()</a>. <br /></td></tr>
<tr class="separator:a23868df494ffd83e64765b50b2f59de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a7ccdd7e11e9c4bbf1887270e9d74779a">module_names</a></td></tr>
<tr class="memdesc:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains list of names of all module instances.  <a href="mato_8c.html#a7ccdd7e11e9c4bbf1887270e9d74779a">More...</a><br /></td></tr>
<tr class="separator:a7ccdd7e11e9c4bbf1887270e9d74779a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f565b6876bed976cee1f43eaa6d6787"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a2f565b6876bed976cee1f43eaa6d6787">module_types</a></td></tr>
<tr class="memdesc:a2f565b6876bed976cee1f43eaa6d6787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains list of types of all module instances.  <a href="mato_8c.html#a2f565b6876bed976cee1f43eaa6d6787">More...</a><br /></td></tr>
<tr class="separator:a2f565b6876bed976cee1f43eaa6d6787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0d7e8d878428833528a1123d6558c5"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a0e0d7e8d878428833528a1123d6558c5">instance_data</a></td></tr>
<tr class="memdesc:a0e0d7e8d878428833528a1123d6558c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains pointers to instance_data of all module instances as returned by their create_instance_callback.  <a href="mato_8c.html#a0e0d7e8d878428833528a1123d6558c5">More...</a><br /></td></tr>
<tr class="separator:a0e0d7e8d878428833528a1123d6558c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc125cf88b5a24be8ced43b9f710a19"><td class="memItemLeft" align="right" valign="top">GHashTable *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a8cc125cf88b5a24be8ced43b9f710a19">module_specifications</a></td></tr>
<tr class="memdesc:a8cc125cf88b5a24be8ced43b9f710a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structures for all type names.  <a href="mato_8c.html#a8cc125cf88b5a24be8ced43b9f710a19">More...</a><br /></td></tr>
<tr class="separator:a8cc125cf88b5a24be8ced43b9f710a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2822a291e85d87882c86a179b50c99f6"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a2822a291e85d87882c86a179b50c99f6">buffers</a></td></tr>
<tr class="memdesc:a2822a291e85d87882c86a179b50c99f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data of all messages that are maintained by the framework at any point of time are kept in this GArray.  <a href="mato_8c.html#a2822a291e85d87882c86a179b50c99f6">More...</a><br /></td></tr>
<tr class="separator:a2822a291e85d87882c86a179b50c99f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e2f37fb2e955b97bacbbd53876850a"><td class="memItemLeft" align="right" valign="top"><a id="aa6e2f37fb2e955b97bacbbd53876850a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#aa6e2f37fb2e955b97bacbbd53876850a">next_free_module_id</a></td></tr>
<tr class="memdesc:aa6e2f37fb2e955b97bacbbd53876850a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A counter for assigning a new module_id for newly created module instances. <br /></td></tr>
<tr class="separator:aa6e2f37fb2e955b97bacbbd53876850a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c68d041defa2734c56413420d572c2a"><td class="memItemLeft" align="right" valign="top"><a id="a3c68d041defa2734c56413420d572c2a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a3c68d041defa2734c56413420d572c2a">next_free_subscription_id</a></td></tr>
<tr class="memdesc:a3c68d041defa2734c56413420d572c2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A counter for assining a new subscription_id for newly registered subscriptions. <br /></td></tr>
<tr class="separator:a3c68d041defa2734c56413420d572c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a6dc7b239323f6dbb221f209b6f518"><td class="memItemLeft" align="right" valign="top">GArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a08a6dc7b239323f6dbb221f209b6f518">subscriptions</a></td></tr>
<tr class="memdesc:a08a6dc7b239323f6dbb221f209b6f518"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all descriptions of subscriptions, instances of subscription structures.  <a href="mato_8c.html#a08a6dc7b239323f6dbb221f209b6f518">More...</a><br /></td></tr>
<tr class="separator:a08a6dc7b239323f6dbb221f209b6f518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace00a3e120249460a8acf8381667cc75"><td class="memItemLeft" align="right" valign="top"><a id="ace00a3e120249460a8acf8381667cc75"></a>
pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#ace00a3e120249460a8acf8381667cc75">framework_mutex</a></td></tr>
<tr class="memdesc:ace00a3e120249460a8acf8381667cc75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for mutual exclusion when accessing framework structures from functions that can be called from different threads. <br /></td></tr>
<tr class="separator:ace00a3e120249460a8acf8381667cc75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225d8d1a4c4e855493b258620e5e2be4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mato_8c.html#a225d8d1a4c4e855493b258620e5e2be4">post_data_pipe</a> [2]</td></tr>
<tr class="memdesc:a225d8d1a4c4e855493b258620e5e2be4"><td class="mdescLeft">&#160;</td><td class="mdescRight">New messages that are posted by the modules are allocated in dynamic memory.  <a href="mato_8c.html#a225d8d1a4c4e855493b258620e5e2be4">More...</a><br /></td></tr>
<tr class="separator:a225d8d1a4c4e855493b258620e5e2be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the Mato control framework. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a948891305b2d86ead8d8b9e98ee992ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a948891305b2d86ead8d8b9e98ee992ea">&#9670;&nbsp;</a></span>decrement_references()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GList* decrement_references </td>
          <td>(</td>
          <td class="paramtype">GList *&#160;</td>
          <td class="paramname"><em>data_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__data.html">channel_data</a> *&#160;</td>
          <td class="paramname"><em>to_be_decremented</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrements the number of references to a particular buffer and deallocates the buffer itself as well as the structure describing the buffer. </p>
<p>It also removes it from the list of the framework-maintained messages. </p>

</div>
</div>
<a id="af3c84af45ac99910057189ede367d72d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c84af45ac99910057189ede367d72d">&#9670;&nbsp;</a></span>mato_borrow_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_borrow_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the most recently posted data of some channel of some module instance. </p>
<p>In this case, the data is not copied, but a pointer to read-only memory containing the data is provided. The module should return the borrowed pointer back to the framework by calling <a class="el" href="mato_8h.html#aedcb803fd4a991e805e6c3813c829a35" title="Return a borrowed pointer that was obtained either by mato_borrow_data() or by a callback in the borr...">mato_release_data()</a> when the data is not needed anymore. </p>

</div>
</div>
<a id="a411a20bcfa908edbebe617fe5cc54667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a411a20bcfa908edbebe617fe5cc54667">&#9670;&nbsp;</a></span>mato_create_new_module_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mato_create_new_module_instance </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main program (or other module) can call this function to request creation of a module instance. </p>
<p>The function returns the new module id. </p>

</div>
</div>
<a id="ab49165685fd95d2e9f70f484e367c6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49165685fd95d2e9f70f484e367c6f2">&#9670;&nbsp;</a></span>mato_data_buffer_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_data_buffer_usage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>module_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>number_of_allocated_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>total_sum_of_ref_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provide a diagnostic information on use of the buffers by a particular channel of a particular module. </p>
<p>If this starts growing, the callbacks take too much time to process data and should be refactored. </p>

</div>
</div>
<a id="a480acc181ff3a7d7c925d64e3d4a7442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a480acc181ff3a7d7c925d64e3d4a7442">&#9670;&nbsp;</a></span>mato_dec_thread_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_dec_thread_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrement the number of threads running. It should be called by each thread that terminates. </p>
<p>Each thread that terminates should call this function just before it quits. </p>

</div>
</div>
<a id="af356c7284b6f1d6be285de40d9e23b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af356c7284b6f1d6be285de40d9e23b77">&#9670;&nbsp;</a></span>mato_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_get_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the most recently posted data of some channel of some module instance. </p>
<p>Data is copied into the buffer provided, and the length of the data is set to data_length. The calling module should release the memory by calling free() when it is not needed anymore. </p>

</div>
</div>
<a id="a5c6a3a9b7e7969e9d9324b1d937ff2a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6a3a9b7e7969e9d9324b1d937ff2a5">&#9670;&nbsp;</a></span>mato_get_list_of_all_modules()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* mato_get_list_of_all_modules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the list of currently running modules. </p>
<p>The list should be freed by calling <a class="el" href="mato_8h.html#aeafc9d85e29a73b9b5423cd661bd54c2" title="Free the list of modules returned by either of the two functions mato_get_list_of_modules() or mato_g...">mato_free_list_of_modules()</a> when it is not needed anymore. </p>

</div>
</div>
<a id="ac8c86d7dbb7acd09f1884c2e80ec698c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8c86d7dbb7acd09f1884c2e80ec698c">&#9670;&nbsp;</a></span>mato_get_list_of_modules()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* mato_get_list_of_modules </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the list of currently running modules of the specified type. </p>
<p>The list should be freed by calling <a class="el" href="mato_8h.html#aeafc9d85e29a73b9b5423cd661bd54c2" title="Free the list of modules returned by either of the two functions mato_get_list_of_modules() or mato_g...">mato_free_list_of_modules()</a> when it is not needed anymore. </p>

</div>
</div>
<a id="a6b31044a7afec17426ec4d4e3354aa9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b31044a7afec17426ec4d4e3354aa9f">&#9670;&nbsp;</a></span>mato_inc_thread_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_inc_thread_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment the number of threads running. This should be called by each thread that has been started. </p>
<p>Each module instance (or other part of the program) that creates a new thread should call this funciton for each newly created thread. </p>

</div>
</div>
<a id="a96f8e9e3c32c9abdab14dabd590fae87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96f8e9e3c32c9abdab14dabd590fae87">&#9670;&nbsp;</a></span>mato_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the framework. It must be the first function of the framework to be called. It should be called only once. </p>
<p>Initialize the whole framework. Should be called first from the main program. </p>

</div>
</div>
<a id="a43f0570e3ab59d7a021e93113437dcaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f0570e3ab59d7a021e93113437dcaf">&#9670;&nbsp;</a></span>mato_register_new_type_of_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_register_new_type_of_module </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmodule__specification.html">module_specification</a> *&#160;</td>
          <td class="paramname"><em>specification</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a new module type. </p>
<p>This is typically called from the init() function of each module type, which should be called directly from the main program. </p>

</div>
</div>
<a id="a62a0865fa5114c0a254435a1369531cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a0865fa5114c0a254435a1369531cf">&#9670;&nbsp;</a></span>mato_start_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mato_start_module </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>module_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a newly created instance of a particular module. </p>
<p>This is typically used when the module instance is created later than when the framework has already been started. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2822a291e85d87882c86a179b50c99f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2822a291e85d87882c86a179b50c99f6">&#9670;&nbsp;</a></span>buffers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* buffers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data of all messages that are maintained by the framework at any point of time are kept in this GArray. </p>
<p>It is indexed by module_id and contains GArrays indexed by channel number of the particular module instance. Finally, the elements of the nested GArray are GLists - the list of all messages of the particular module in its particular channel that are still needed by the framework or any other module and thus have not been deallocated. Each time a module posts a new message to its channel, it is added to that list. The message is removed from the list when it has have been forwarded to all the subscribers, no subscriber or another module has borrowed a pointer to it and a new message from the module on the same channel has already arrived. </p>

</div>
</div>
<a id="a0e0d7e8d878428833528a1123d6558c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0d7e8d878428833528a1123d6558c5">&#9670;&nbsp;</a></span>instance_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* instance_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains pointers to instance_data of all module instances as returned by their create_instance_callback. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a7ccdd7e11e9c4bbf1887270e9d74779a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ccdd7e11e9c4bbf1887270e9d74779a">&#9670;&nbsp;</a></span>module_names</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* module_names</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains list of names of all module instances. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a8cc125cf88b5a24be8ced43b9f710a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cc125cf88b5a24be8ced43b9f710a19">&#9670;&nbsp;</a></span>module_specifications</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GHashTable* module_specifications</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structures for all type names. </p>
<p>The keys in this hashtable are the module types. The value is a pointer to <a class="el" href="structmodule__specification.html" title="Each module type has to provide the callbacks for its module instances.">module_specification</a> structure as provided by the argument to <a class="el" href="mato_8c.html#a43f0570e3ab59d7a021e93113437dcaf" title="Register a new module type.">mato_register_new_type_of_module()</a> function that is typically called from the init function of a module type. </p>

</div>
</div>
<a id="a2f565b6876bed976cee1f43eaa6d6787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f565b6876bed976cee1f43eaa6d6787">&#9670;&nbsp;</a></span>module_types</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* module_types</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains list of types of all module instances. </p>
<p>The GArray is indexed by module_id. After a particular module is deleted, its module_id and the location in this array will remain unused. </p>

</div>
</div>
<a id="a225d8d1a4c4e855493b258620e5e2be4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225d8d1a4c4e855493b258620e5e2be4">&#9670;&nbsp;</a></span>post_data_pipe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int post_data_pipe[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>New messages that are posted by the modules are allocated in dynamic memory. </p>
<p>Pointers to that memory enter this pipe and are picked up by a message redistribution loop that takes care of them in a serial manner. Handling of each message is supposed to be done very quickly - assuming the subscriber callbacks return quickly. In the future release, we expect each subscriber callback to be called in a separate thread taken from a thread pool. </p>

</div>
</div>
<a id="a0f80851fe27966d69a2a0dfbafdb7160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f80851fe27966d69a2a0dfbafdb7160">&#9670;&nbsp;</a></span>program_runs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int program_runs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set to one when the framework is initialized and cleared when any part of the program wants to terminate the whole program. </p>
<p>This variable is set to non-zero when the program is about to terminate.</p>
<p>After it is set to zero, all threads are expected to terminated soon. When all threads terminate, the application terminates. </p>

</div>
</div>
<a id="a08a6dc7b239323f6dbb221f209b6f518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08a6dc7b239323f6dbb221f209b6f518">&#9670;&nbsp;</a></span>subscriptions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GArray* subscriptions</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains all descriptions of subscriptions, instances of subscription structures. </p>
<p>The GArray is indexed by the module_id and contains GArrays indexed by channel number Finally, the nested GArray elements are again GArrays containing all subscriptions to that particular channel of that particular module. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
